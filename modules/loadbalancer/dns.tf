


//////////////////////////////////////////////////////////[ DNS RECORD ]//////////////////////////////////////////////////

# # ---------------------------------------------------------------------------------------------------------------------#
# Create certificate for load balancer
# # ---------------------------------------------------------------------------------------------------------------------#
resource "digitalocean_domain" "this" {
  name = var.domain
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Add an A record to the domain www
# # ---------------------------------------------------------------------------------------------------------------------#
resource "digitalocean_record" "www" {
  domain = digitalocean_domain.this.id
  type   = "A"
  name   = "www"
  ttl    = 300
  value  = digitalocean_loadbalancer.this.ip
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Add an A record to the domain
# # ---------------------------------------------------------------------------------------------------------------------#
resource "digitalocean_record" "self" {
  domain = digitalocean_domain.this.id
  type   = "A"
  name   = "@"
  ttl    = 300
  value  = digitalocean_loadbalancer.this.ip
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Add a MX record for the domain
# # ---------------------------------------------------------------------------------------------------------------------#
resource "digitalocean_record" "mx" {
  domain   = digitalocean_domain.this.id
  type     = "MX"
  name     = "@"
  priority = 10
  ttl      = 300
  value    = "mail.${var.domain}."
}


