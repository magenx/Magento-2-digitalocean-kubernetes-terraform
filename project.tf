


///////////////////////////////////////////////////////////[ PROJECT ]////////////////////////////////////////////////////

# # ---------------------------------------------------------------------------------------------------------------------#
# Define brand or business name
# # ---------------------------------------------------------------------------------------------------------------------#
variable "brand" {
   default = "magenx"
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Create hash number to assign to project name
# # ---------------------------------------------------------------------------------------------------------------------#
resource "random_string" "project" {
  length         = 7
  lower          = true
  number         = true
  special        = false
  upper          = false
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Create global project name to be assigned per environment
# # ---------------------------------------------------------------------------------------------------------------------#
locals {
   project_prefix = lower("${var.brand}-${random_string.project.result}")
   environment    = lower(terraform.workspace)
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Create project per environment
# # ---------------------------------------------------------------------------------------------------------------------#
resource "digitalocean_project" "this" {
  name        = "${local.project_prefix}-${local.environment}"
  description = "Project for ${local.project_prefix} ${local.environment}"
  purpose     = "Infrastructure for ${local.project_prefix} ${local.environment}"
  environment = title(local.environment)
}
# # ---------------------------------------------------------------------------------------------------------------------#
# Get project data
# # ---------------------------------------------------------------------------------------------------------------------#
locals {
   project = digitalocean_project.this
}


